# helper functions for writing responses

exports.content=(req,res,content,mime) ->
  res.writeHead 200,
    'Content-Type':mime
  res.end content

exports.json=(req,res,obj) ->
  res.writeHead 200,
    'Content-Type':'application/json'
  res.end JSON.stringify obj

exports.error=(req,res,e=null,text='Internal Server Error',code=500) ->
  console.log code+' Error on '+req.method+' '+req.url
  console.log text
  console.dir e if e?

  res.writeHead code,text,
    'Content-Type':'text/plain'
  res.end text

exports.not_found=(req,res,text) ->
  exports.error req,res,text,'Not Found',404

exports.bad_request=(req,res,text) ->
  exports.error req,res,text,'Bad Request',400

